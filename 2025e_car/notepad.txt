一、任务
设计一个由四旋翼无人机及消防车构成的空地协同智能消防系统。无人机上安装垂直向下的激光0.40t笔，用于指示巡逻航迹。巡防区域为40dmx48dm。无人机巡逻时可覆盖地面8dm 宽度区域。以缩短完成全覆盖巡逻时间为原则，无人机按照规划航线巡逻。发现火情后立即采取初步消防措施，并将火源地点位置信息发给消防车，使其前往熄灭火源。空地协同巡逻及消防工作完成时间越短越好。

二、要求
1.基本要求
(1)参赛队需自制模拟火源。模拟火源是用电池供电的红色光源，如LED等，用激光笔持续照射可控制开启或关闭:持续照射2秒左右开启，再持续照射2 秒左右关闭。
(2)展示规划的巡逻航线图，在消防车上按键启动无人机垂直起飞后，无人机以 18dm 左右高度，在巡防区域按规划的航线完成全覆盖巡逻。
(3)无人机与消防车之间采用无线通信;巡逻期间无人机每秒向消防车发送1次位置坐标信息，消防车上显示器实时更新显示无人机位置坐标信息
(4)巡逻中，消防车显示器显示巡逻航迹曲线,计算并显示累计巡逻航程。(5)完成巡逻后，无人机返回，准确降落在起飞区域内。

2.发挥部分
(1)手动操作激光笔点亮一个火源。在消防车上启动无人机巡逻。无人机按规划航线巡逻，发现火情后，前往接近火源(水平距离≤5dm)识别确认，再在无人机上用 LED 指示灯示警。
(2)无人机飞至火源地点上方，降低至10dm 左右高度，悬停3s后抛酒灭火包，灭火包落在以火源点为中心、半径 3dm 圆形区域内:再将火源地点位置坐标发送给消防车，然后继续巡逻，完成后返航回到起飞点。
(3)消防车接收到火情信息，显示火源地点位置坐标后，从消防站出发前往火源地点，途中不得碾压街区及其边界线，在5dm距离内以激光笔光束照射模拟火源将其熄灭。
(4)熄灭模拟火源后消防车返回到出发区域内。发挥部分限时 360s内完成。

小车芯片：stm32f407vet6
/*
左轮正转 TIM1_CH1  PE9
左轮反转 TIM1_CH2  PE11
右轮正转 TIM1_CH3  PE13
右轮反转 TIM1_CH4  PE14
*/
串口三：串口陀螺仪 yaw的数据存在结构体里： IMU_data.YawZ
串口四：蓝牙调试（dma发送和接收 解析调试数据 打印调试信息）
GMR513X电机：减速比：1：28  PPR为500
驱动 ：TB6612FNG
双轮差速转向

现在我在完成小车的运动控制部分，这是一个双轮驱动小车，带有陀螺仪，舵机，串口通信(已完成）
首先，让我们先完成运动部分功能，pwm 和编码器计算速度 已经完成(已完成）
现在需要完成pid计算，要求：封装pid函数 实现可重复使用，参数调节p i d用宏定义，方便调节参数。(已完成）
左右轮的速度我都计算出来了，所以需要左右轮都进行pid计算。(已完成）
现在的任务：建立一个坐标系，让小车实现设置任何一个坐标，小车都能直接走过去，并实时更新当前坐标。
    第一阶段：基础坐标系统
        实现位置结构体和基本函数
        在TIM2_Task_100Hz中添加位置更新逻辑
        测试坐标更新精度的导航系统，让小车能自主前往任意目标点，同时避开障碍物。
    第二阶段：简单直线导航
        实现简单的点到点导航(无障碍物)
        测试小车能否准确到达目标点
    第三阶段：障碍物定义
        添加障碍物数据结构
        实现碰撞检测函数
    第四阶段：路径规划
        实现绕障路径规划算法
        路径平滑处理
    第五阶段：完整系统测试
        测试小车在有障碍物环境中的导航能力
        优化参数提高精度和稳定性

五、运动控制实现
运动状态控制
IDLE：空闲状态
MOVING：正在移动到目标点
ROTATING：正在旋转调整朝向
ARRIVED：已到达目标点

火源在图片中红星的位置 也就是建筑物1.2.6 
消防车从红色区域启动，去执行飞机发过来的灭火任务。我现在正在完成消防车路径规划的部分
现在的思路：设计三条固定的路线，消防车执行任务后需要原路返回，注意 要留下关于灭火部分代码的位置，
因为到达位置之后需要通过pid调整车的位置 还有让舵机执行灭火